= Movie Translator Service: AI-Powered Microservices :author: Masterhuthiu 

== üìù Project Introduction

The Movie Translator Service is a modern microservices-based system designed to automatically translate movie plots from English to Vietnamese using Artificial Intelligence (AI). The system is engineered to handle large datasets asynchronously and maintain high availability on a Kubernetes platform.


Core Technology: Google Gemini API (Model: gemma-3-27b-it).


Main Functionality: Scans the movie database, automatically translates English plots that lack Vietnamese versions, and updates the results back into the database.

== üèó System Architecture

The system consists of several key components:


API Layer: Developed using FastAPI on Python 3.11.
+1


Database: MongoDB stores the sample movie data (sample_mflix).


AI Engine: Integrates the google-generativeai SDK to interact with the Gemma-3 model.


Containerization: Packaged using Docker and deployed via GitHub Actions.

Orchestration: Fully managed and orchestrated by Kubernetes (K8s).

== üõ† Technical Configuration
== üåê Service Discovery (Consul)

The service automatically registers itself with **Consul** upon startup to enable seamless integration with the Frontend or Gateway.

* **Service Name**: `translator-service`
* **Health Check**: Every 10 seconds via `GET /`.
* **Deregistration**: Performed automatically on service shutdown.

[source,bash]
----
# Check registered services in Consul
curl http://consul-server:8500/v1/catalog/service/translator-service
----
=== 1. Environment Variables (.env) The project requires the following configuration parameters:

[source,env]
GEMINI_API_KEY=AIzaSy... # Google AI Studio API Key MONGO_URI=mongodb://mongodb:27017/ # MongoDB connection string PORT=8080 # FastAPI service port
=== 2. Dependencies (requirements.txt) The service utilizes optimized Python libraries:

fastapi & uvicorn: High-performance web framework.

google-generativeai: SDK for Gemini AI connectivity.

pymongo: Official driver for MongoDB operations.

bson: Library to handle MongoDB ObjectIDs.

== üöÄ Deployment Guide

=== Step 1: Initialize Kubernetes Secrets Before deploying the pods, create a secret to securely store sensitive information:

[source,bash]
kubectl create secret generic ai-secrets
--from-literal=GEMINI_API_KEY=YOUR_KEY_HERE

--from-literal=MONGO_URI=mongodb://mongodb:27017/

=== Step 2: Infrastructure Deployment Deploy the components in the following order:

MongoDB: kubectl apply -f 1mongo-deploy.yml

Translator App: kubectl apply -f 3translator-deploy.yml

=== Step 3: CI/CD Pipeline The system automatically builds and pushes the image to Docker Hub on every push to the main branch via GitHub Actions. The image is tagged as: ${{ secrets.DOCKERHUB_USERNAME }}/movie-translator:latest.

== üì° API Usage Instructions

=== 1. Health Check

Endpoint: GET /

Description: Verifies if the service is up and running.

=== 2. Translate by Filter (Batch Processing)

Endpoint: POST /translate/filter

Parameters: year (Optional - Filter movies by release year).

Description: Scans for 10 movies matching the criteria and translates them in the background.

Usage: [source,bash]

curl -X 'POST' 'http://<ingress-ip>/translate/filter?year=2026'
=== 3. Translate by Specific ID (Single Processing) [NEW]

Endpoint: POST /translate/id/{movie_id}

Parameters: movie_id (The MongoDB _id of the movie).

Description: Immediately queues a specific movie for translation.

Usage: [source,bash]

curl -X 'POST' 'http://<ingress-ip>/translate/id/69898d766862aa18a18ce5b0'
== üìÇ Core Source Structure (main.py)

The application leverages Background Tasks to ensure the API responds immediately while the AI processes translations in the background:

[source,python]
@app.post('/translate/id/{movie_id}') async def translate_by_id(movie_id: str, background_tasks: BackgroundTasks): obj_id = ObjectId(movie_id) movie = col.find_one({'_id': obj_id}) if not movie: raise HTTPException(status_code=404, detail="Movie not found")

background_tasks.add_task(translate_single_movie, movie)
return {'status': 'added_to_queue', 'title': movie.get('title')}
Copyright ¬© 2026 Masterhuthiu. Built with ‚ù§Ô∏è and AI.